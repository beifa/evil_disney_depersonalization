## Search and depersonalization of customer data in unstructured text.

![who is your favorite uncle](image/scar-lion-king.jpg)

Разработать алгоритм по поиску и замене ФИО, адресной информации, ИНН в тексте различного формата. При этом ФИО и адресная информация в тексте может склоняться.

Требования и ограничения:

- ИНН должны проходит проверку на корректность.
- Атрибуты ФИО должны согласованы и сохранять отношение клиента к мужчинам или женщинам.
- Допускается использование только библиотек с лицензиями Apache, BSD, MIT, и другие open source.

[Неструктурированные данные wiki](https://ru.wikipedia.org/wiki/Неструктурированные_данные)

— данные, которые не соответствуют заранее определённой модели данных, и, как правило, представлены в форме текста с датами, цифрами, фактами, расположенными в нём в произвольной форме.

## Мое решение.

Мы генерируем данные данные я использовал тексты с Lorem Ipsum абзацев 250 случайного текста.
Затем я рандомно вставляю в текст (ФИО, адресной информации, ИНН) эту информацию я взял из [RuCode «Газпромбанк»](https://mipt.ru/news/partner_festivalya_rucode_gazprombank_priglashaet_reshit_realnye_zadachi_dlya_biznesa)

Нам нужны данные для маскировки обезличивания данных(я придумал свой набор состоящий из героев злодеев мультфильмов  Walt Disney) 
```
...
['Злая Королева Белоснежка', 'Братья Гримм 1937а', 'Ж'],
['Верховный_бог Аид Геркулес','Загробный Мир 1001', 'М'],
...
```
Алгоритм достаточно прост, у нас есть данные (ФИО, адресной информации, ИНН)
Мы можем расчитать длинну для каждого значения:

    ФИО = 3,
    адресной информации = [3-5],
    ИНН = 12
    
Мы просто ищем похожую структуру в данных к примеру 3 заглавные буквы берем индекс
начала и конца и это к примеру наша фамилия.
Затем зная индекс мы подставим злюк из Walt Disney по размеру(кол-во слов) и полу
для адреса простая регулярка и перевод в хаш.

```
повседневная практика показывает, что сложившаяся структура организации требуют определения и Варинский Шукра Варленовна форм развития. идейные соображения высшего порядка, а также новая модель организационной деятельности играет важную роль в формировании системы обучения кадров, соответствует насущным потребностям. с другой стороны постоянное информационно-пропагандистское обеспечение нашей деятельности позволяет выполнять важные задания по разработке соответствующий условий активизации. задача организации, в особенности же начало повседневной 339625788784 по формированию позиции представляет собой интересный эксперимент проверки форм развития. разнообразный и богатый опыт консультация с широким активом в значительной степени обуславливает создание дальнейших Москва Ленина 03 развития. с другой стороны сложившаяся структура организации играет важную роль в формировании дальнейших направлений развития.
{'85_86_87': ('Москва', 'Ленина', '03')}
{'10_11_12': ('Варинский', 'Шукра', 'Варленовна')}

````
Затем я сохраняю наши оригинальные данные (хаш: [ФИО, адресной информации, ИНН])

Для декодирования мы просто подменим данные теперь маскировочные это наши сохраненные оригинальные данные.


Time result:
```
Colab:
    masked:
        100%|██████████| 250000/250000 [15:55<00:00, 261.64it/s]
        CPU times: user 1min 34s, sys: 6.04 s, total: 1min 40s
        Wall time: 15min 55s
    decode:
        CPU times: user 1min 22s, sys: 5.58 s, total: 1min 27s
        Wall time: 5min 52s

Home:
    mask:
        100%|██████████| 250000/250000 [02:05<00:00, 1986.11it/s]
        CPU times: user 29.5 s, sys: 2.73 s, total: 32.2 s
        Wall time: 2min 6s
    decode:
        CPU times: user 14.6 s, sys: 965 ms, total: 15.5 s
        Wall time: 1min 9s
```
Test pass  1Million lines:
```
Colab:
    mask:
        100%|██████████| 1000000/1000000 [1:01:40<00:00, 270.24it/s]
        CPU times: user 6min 29s, sys: 19.9 s, total: 6min 49s
        Wall time: 1h 1min 41s
    decode:
        CPU times: user 5min 37s, sys: 20.9 s, total: 5min 58s
        Wall time: 22min 45s        
Home:
     mask ~ 9 min
     decode ~ 5 min
```
